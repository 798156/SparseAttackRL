"""
ä¸€é”®è¿è¡Œ100æ ·æœ¬å®Œæ•´æµ‹è¯•
è‡ªåŠ¨æ‰§è¡Œï¼š
1. 3ä¸ªæ¨¡å‹ Ã— 3ä¸ªæ–¹æ³•ï¼ˆJSMA, SparseFool, Greedyï¼‰
2. 3ä¸ªæ¨¡å‹ Ã— 2ä¸ªæ–¹æ³•ï¼ˆRandomSparse, PixelGradï¼‰
3. è‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š
"""

import subprocess
import time
from datetime import datetime
from pathlib import Path

def run_command(cmd, description):
    """è¿è¡Œå‘½ä»¤å¹¶æ˜¾ç¤ºè¿›åº¦"""
    print(f"\n{'='*80}")
    print(f"ğŸ“Š {description}")
    print(f"{'='*80}")
    print(f"â° å¼€å§‹æ—¶é—´: {datetime.now().strftime('%H:%M:%S')}")
    print(f"ğŸš€ æ‰§è¡Œå‘½ä»¤: {cmd}")
    print(f"{'='*80}\n")
    
    start_time = time.time()
    
    try:
        result = subprocess.run(cmd, shell=True, check=True)
        elapsed = time.time() - start_time
        
        print(f"\n{'='*80}")
        print(f"âœ… {description} - å®Œæˆï¼")
        print(f"â±ï¸ è€—æ—¶: {elapsed/60:.1f} åˆ†é’Ÿ")
        print(f"{'='*80}\n")
        
        return True
    except subprocess.CalledProcessError as e:
        print(f"\n{'='*80}")
        print(f"âŒ {description} - å¤±è´¥ï¼")
        print(f"é”™è¯¯: {e}")
        print(f"{'='*80}\n")
        return False

def main():
    """ä¸»æµç¨‹"""
    print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ğŸ¯ 100æ ·æœ¬å®Œæ•´æµ‹è¯• - è‡ªåŠ¨åŒ–æµç¨‹                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æµ‹è¯•å†…å®¹ï¼š
  âœ… 3ä¸ªæ¨¡å‹ï¼ˆResNet18, VGG16, MobileNetV2ï¼‰
  âœ… 5ç§æ–¹æ³•ï¼ˆJSMA, SparseFool, Greedy, RandomSparse, PixelGradï¼‰
  âœ… æ¯ä¸ªç»„åˆ100ä¸ªæ ·æœ¬
  âœ… æ€»è®¡ï¼š1500ä¸ªå¯¹æŠ—æ ·æœ¬æµ‹è¯•

é¢„è®¡æ—¶é—´ï¼š
  ğŸ“Œ æ­¥éª¤1ï¼ˆJSMA+SparseFool+Greedyï¼‰ï¼šçº¦ 40-60 åˆ†é’Ÿ
  ğŸ“Œ æ­¥éª¤2ï¼ˆRandomSparse+PixelGradï¼‰ï¼šçº¦ 20-30 åˆ†é’Ÿ
  ğŸ“Œ æ­¥éª¤3ï¼ˆåˆ†ææŠ¥å‘Šï¼‰ï¼šçº¦ 1-2 åˆ†é’Ÿ
  â° æ€»è®¡ï¼šçº¦ 60-90 åˆ†é’Ÿ

å»ºè®®ï¼š
  â˜• å¯ä»¥å»å–æ¯å’–å•¡ï¼Œç¨‹åºä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰æµ‹è¯•
  ğŸ’¡ æµ‹è¯•å®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆå®Œæ•´åˆ†ææŠ¥å‘Š
    """)
    
    input("æŒ‰ Enter é”®å¼€å§‹æµ‹è¯•...")
    
    total_start = time.time()
    results = []
    
    # æ­¥éª¤1ï¼šæµ‹è¯•å‰3ä¸ªæ–¹æ³•
    success = run_command(
        "python final_test_with_greedy.py",
        "æ­¥éª¤1/3ï¼šæµ‹è¯• JSMA + SparseFool + Greedyï¼ˆ900ä¸ªæµ‹è¯•ï¼‰"
    )
    results.append(("æ­¥éª¤1", success))
    
    if not success:
        print("âš ï¸ æ­¥éª¤1å¤±è´¥ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ")
        if input("è¾“å…¥ 'y' ç»§ç»­ï¼Œå…¶ä»–é”®é€€å‡º: ").lower() != 'y':
            return
    
    # æ­¥éª¤2ï¼šæµ‹è¯•å2ä¸ªæ–¹æ³•
    success = run_command(
        "python test_new_2methods.py",
        "æ­¥éª¤2/3ï¼šæµ‹è¯• RandomSparse + PixelGradï¼ˆ600ä¸ªæµ‹è¯•ï¼‰"
    )
    results.append(("æ­¥éª¤2", success))
    
    if not success:
        print("âš ï¸ æ­¥éª¤2å¤±è´¥ï¼Œæ˜¯å¦ç»§ç»­ç”Ÿæˆåˆ†æï¼Ÿ")
        if input("è¾“å…¥ 'y' ç»§ç»­ï¼Œå…¶ä»–é”®é€€å‡º: ").lower() != 'y':
            return
    
    # æ­¥éª¤3ï¼šç”Ÿæˆåˆ†ææŠ¥å‘Š
    success = run_command(
        "python analyze_all_5methods.py",
        "æ­¥éª¤3/3ï¼šç”Ÿæˆå®Œæ•´åˆ†ææŠ¥å‘Š"
    )
    results.append(("æ­¥éª¤3", success))
    
    # æœ€ç»ˆæ€»ç»“
    total_elapsed = time.time() - total_start
    
    print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           ğŸ‰ æµ‹è¯•å®Œæˆæ€»ç»“                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸  æ€»è€—æ—¶: {total_elapsed/60:.1f} åˆ†é’Ÿ

ğŸ“Š æ‰§è¡Œç»“æœ:
""")
    
    for step, success in results:
        status = "âœ… æˆåŠŸ" if success else "âŒ å¤±è´¥"
        print(f"  {step}: {status}")
    
    print(f"""
ğŸ’¾ ç»“æœä½ç½®:
  - åŸå§‹æ•°æ®: results/complete_baseline/
  - åˆ†ææŠ¥å‘Š: results/paper_materials/
  - å›¾è¡¨æ–‡ä»¶: results/paper_materials/
  - LaTeXè¡¨æ ¼: results/paper_materials/latex_table_5methods.tex

ğŸ“ˆ ä¸‹ä¸€æ­¥å»ºè®®:
  1. æŸ¥çœ‹ results/paper_materials/analysis_report_5methods.md
  2. æ£€æŸ¥æ‰€æœ‰å›¾è¡¨è´¨é‡
  3. éªŒè¯æ•°æ®åˆç†æ€§
  4. å¼€å§‹å‡†å¤‡é˜²å¾¡æ¨¡å‹æµ‹è¯•ï¼ˆDay 3-4è®¡åˆ’ï¼‰

ğŸ¯ å½“å‰è¿›åº¦: Week 1 - Day 1-2 âœ… å®Œæˆï¼

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ç»§ç»­åŠ æ²¹ï¼å‘è®ºæ–‡å‘è¡¨å‰è¿›ï¼ ğŸ’ª                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    """)

if __name__ == "__main__":
    main()
















